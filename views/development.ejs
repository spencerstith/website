<!DOCTYPE html>
<html>

<head>
  <%- include('partials/head'); %>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.min.js"
      integrity="sha512-gQVBYBvfC+uyor5Teonjr9nmY1bN+DlOCezkhzg4ShpC5q81ogvFsr5IV4xXAj6HEtG7M1Pb2JCha97tVFItYQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
  <%- include('partials/nav'); %>

    <script type="text/javascript">
      var params = window.location.search.substring(1).split('&');
      params.forEach(function (p) {
        let parts = p.split('=');
        if (parts[0] == 'proj' && checkName(parts[1])) {
          document.body.appendChild(document.createElement('script')).src = 'gen_proj/' + parts[1] + '.js';
        }
      });

      function checkName(n) {
        <% projects.forEach(proj => { %>
          if ("<%- proj.name %>" == n) {
            return true;
          }
        <% }); %>
        return false;
      }
    </script>
</body>

</html>